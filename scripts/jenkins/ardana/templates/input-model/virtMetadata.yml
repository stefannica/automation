#
# (c) Copyright 2018 SUSE LLC
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
---
server-metadata:
{% for service_group in scenario['service-groups'] %}
{%   for idx in range(service_group['member-count']) %}
{%     set server_id = "%s-%04d"|format(service_group.name, idx+1) %}
{%     set ns.server_idx = ns.server_idx+1 %}

    - id: {{ server_id }}
      hostname: {{ scenario['cloud-name'] }}-{{ server_id }}
      ip-addr: 192.168.{{ ns.clm_net_id }}.{{ ns.server_idx }}
      role: {{ service_group.name|upper }}-ROLE
      server-group: RACK{{ (idx%3)+1 }}
      mac-addr: ff:ff:ff:ff:ff:ff
      ilo-ip: 255.255.255.255
      ilo-password: password
      ilo-user: admin
      nic-mapping: HEAT

{%   endfor %}
{% endfor %}
